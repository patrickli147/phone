{"remainingRequest":"C:\\Users\\Lenovo\\Desktop\\demos\\iphone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lenovo\\Desktop\\demos\\iphone\\src\\components\\PowerOffModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Lenovo\\Desktop\\demos\\iphone\\src\\components\\PowerOffModal.vue","mtime":1588495969785},{"path":"C:\\Users\\Lenovo\\Desktop\\demos\\iphone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\demos\\iphone\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\demos\\iphone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\demos\\iphone\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge21hcE11dGF0aW9ucywgbWFwR2V0dGVyc30gZnJvbSAndnVleCcNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAncG93ZXJPZmZNb2RhbCcsDQogIHByb3BzOiB7DQogICAgbXNnOiBTdHJpbmcNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHJvdXRlKTsNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgICAgLy90aGUgd2lkdGggb2YgZGl2LmNvdmVyDQogICAgICAgICAgY292ZXJXaWR0aDowLA0KICAgICAgICAgIC8vc3RhcnQgeCANCiAgICAgICAgICBzdGFydFg6IDAsDQogICAgICAgICAgLy90cnVlIHdoZW4gbW91c2UgZG93biBzdGFydGVkIA0KICAgICAgICAgIGlzU3RhcnRlZDogZmFsc2UsDQogICAgICAgICAgLy9vZmZzZXQgb2YgcG93ZXIgYnV0dG9uDQogICAgICAgICAgb2Zmc2V0OiAwLA0KICAgICAgICAgIC8vdHJ1ZTogc2hvdyB0b2FzdA0KICAgICAgICAgIGlzVG9hc3RTaG93bjogdHJ1ZQ0KICAgICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgICAvL2hhbmRsZSBwb3dlciBvZmYgYnV0dG9uIHRvdWNoIG1vdmUNCiAgICAgIGhhbmRsZVRvdWNobW92ZShldmVudCkgew0KICAgICAgICAgIGxldCBjdXJyZW50WCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7DQogICAgICAgICAgdGhpcy5jb3ZlcldpZHRoID0gY3VycmVudFggPiB0aGlzLnN0YXJ0WCA/IGN1cnJlbnRYIC0gdGhpcy5zdGFydFggOiAwOw0KICAgICAgICAgIHRoaXMub2Zmc2V0ID0gdGhpcy5jb3ZlcldpZHRoOw0KICAgICAgICAgIGlmICh0aGlzLmNvdmVyV2lkdGggPiA4Nikgew0KICAgICAgICAgICAgICAvL3Vuc2hvdyB0b2FzdA0KICAgICAgICAgICAgICB0aGlzLmlzVG9hc3RTaG93biA9IGZhbHNlOw0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlIGlmICghdGhpcy5pc1RvYXN0U2hvd24pIHsNCiAgICAgICAgICAgICAgdGhpcy5pc1RvYXN0U2hvd24gPSB0cnVlOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAodGhpcy5jb3ZlcldpZHRoID49IDE2NSkgew0KICAgICAgICAgICAgICAvL3Bvd2VyIG9mZiBjb25maXJtZWQNCiAgICAgICAgICAgICAgLy90aGlzLiRlbWl0KCJwb3dlcm9mZkNvbmZpcm1lZCIpOw0KICAgICAgICAgICAgICB0aGlzLnBvd2Vyb2ZmQ29uZmlybWVkKCk7DQoNCiAgICAgICAgICAgICAgLy9yZXNldCBkYXRhDQogICAgICAgICAgICAgIHRoaXMuaGFuZGxlVG91Y2hlbmQoKTsNCiAgICAgICAgICB9DQogICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmNvdmVyV2lkdGgpOw0KICAgICAgfSwNCiAgICAgIC8vaGFuZGxlIHBvd2VyIG9mZiBidXR0b24gdG91Y2ggc3RhcnQNCiAgICAgIGhhbmRsZVRvdWNoc3RhcnQoZXZlbnQpIHsNCiAgICAgICAgICAvL2NvbnNvbGUubG9nKCJzdGFydCIpDQogICAgICAgICAgdGhpcy5zdGFydFggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYOw0KICAgICAgfSwNCiAgICAgIGhhbmRsZVRvdWNoZW5kKCkgew0KICAgICAgICAgIHRoaXMuaXNTdGFydGVkID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5jb3ZlcldpZHRoID0gMDsNCiAgICAgICAgICB0aGlzLm9mZnNldCA9IDA7DQogICAgICAgICAgdGhpcy5pc1RvYXN0U2hvd24gPSB0cnVlOw0KICAgICAgfSwNCiAgICAgIC8vaGFuZGxlIHBvd2VyIG9mZiBidXR0b24gdG91Y2ggbW92ZQ0KICAgICAgaGFuZGxlTW91c2Vtb3ZlKGV2ZW50KSB7DQogICAgICAgICAgaWYgKCF0aGlzLmlzU3RhcnRlZCkgew0KICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgfQ0KICAgICAgICAgIC8vY29uc29sZS5sb2coZXZlbnQpOw0KICAgICAgICAgIGxldCBjdXJyZW50WCA9IGV2ZW50LnBhZ2VYOw0KICAgICAgICAgIHRoaXMuY292ZXJXaWR0aCA9IGN1cnJlbnRYID4gdGhpcy5zdGFydFggPyBjdXJyZW50WCAtIHRoaXMuc3RhcnRYIDogMDsNCiAgICAgICAgICB0aGlzLm9mZnNldCA9IHRoaXMuY292ZXJXaWR0aDsNCiAgICAgICAgICBpZiAodGhpcy5jb3ZlcldpZHRoID4gODYpIHsNCiAgICAgICAgICAgICAgLy91bnNob3cgdG9hc3QNCiAgICAgICAgICAgICAgdGhpcy5pc1RvYXN0U2hvd24gPSBmYWxzZTsNCiAgICAgICAgICB9DQogICAgICAgICAgZWxzZSBpZiAoIXRoaXMuaXNUb2FzdFNob3duKSB7DQogICAgICAgICAgICAgIHRoaXMuaXNUb2FzdFNob3duID0gdHJ1ZTsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKHRoaXMuY292ZXJXaWR0aCA+PSAxNjUpIHsNCiAgICAgICAgICAgICAgLy9wb3dlciBvZmYgY29uZmlybWVkDQogICAgICAgICAgICAgIC8vdGhpcy4kZW1pdCgicG93ZXJvZmZDb25maXJtZWQiKTsNCiAgICAgICAgICAgICAgdGhpcy5wb3dlcm9mZkNvbmZpcm1lZCgpOw0KICAgICAgICAgICAgICAvL3Jlc2V0IGRhdGENCiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVNb3VzZXVwKCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy5jb3ZlcldpZHRoKTsNCiAgICAgIH0sDQogICAgICAvL2hhbmRsZSBwb3dlciBvZmYgYnV0dG9uIHRvdWNoIHN0YXJ0DQogICAgICBoYW5kbGVNb3VzZWRvd24oZXZlbnQpIHsNCiAgICAgICAgICAvL2NvbnNvbGUubG9nKGV2ZW50KTsNCiAgICAgICAgICAvL2NvbnNvbGUubG9nKCJzdGFydCIpDQogICAgICAgICAgdGhpcy5pc1N0YXJ0ZWQgPSB0cnVlOw0KICAgICAgICAgIHRoaXMuc3RhcnRYID0gZXZlbnQucGFnZVg7DQogICAgICB9LA0KICAgICAgLy9oYW5kbGUgbW91c2UgdXANCiAgICAgIGhhbmRsZU1vdXNldXAoKSB7DQogICAgICAgICAgdGhpcy5pc1N0YXJ0ZWQgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLmNvdmVyV2lkdGggPSAwOw0KICAgICAgICAgIHRoaXMub2Zmc2V0ID0gMDsNCiAgICAgICAgICB0aGlzLmlzVG9hc3RTaG93biA9IHRydWU7DQogICAgICB9LA0KICAgICAgLy9oYW5kbGVDYW5jZWxQb3dlcm9mZg0KICAgICAgaGFuZGxlQ2FuY2VsUG93ZXJvZmYoKSB7DQogICAgICAgICAgLy90aGlzLiRlbWl0KCJwb3dlcm9mZkNhbmNlbGVkIik7DQogICAgICAgICAgaWYgKHdpbmRvdy5oaXN0b3J5Lmxlbmd0aCA+IDEpIHsNCiAgICAgICAgICAgICAgbGV0IHBhZ2VTdGFjayA9IHRoaXMucGFnZVN0YWNrOw0KICAgICAgICAgICAgICAvL3BvcOW9k+WJjemhtemdog0KICAgICAgICAgICAgICBwYWdlU3RhY2sucG9wKCk7DQogICAgICAgICAgICAgIC8v6I635Y+W55uu5qCH6aG16Z2iDQogICAgICAgICAgICAgIGxldCBkZXN0aW5hdGlvbiA9IHBhZ2VTdGFjay5wb3AoKTsNCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVQYWdlU3RhY2socGFnZVN0YWNrKTsNCiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goZGVzdGluYXRpb24pOyAgIA0KICAgICAgICAgIH0NCiAgICAgIH0sDQogICAgICAvL3Bvd2Vyb2ZmQ29uZmlybWVkDQogICAgICBwb3dlcm9mZkNvbmZpcm1lZCgpIHsNCiAgICAgICAgICAvL+i/memHjOS8muinpuWPkXBob25l57uE5Lu25Lit55qEd2F0Y2gg5a+86Ie06YKj6L6555qEcG93ZXJvZmblhYjmiafooYwNCiAgICAgICAgICB0aGlzLmNoYW5nZVBvd2Vyb2ZmQ29tZmlybWVkKHRydWUpOw0KICAgICAgICAvLyAgIGlmICh3aW5kb3cuaGlzdG9yeS5sZW5ndGggPiAxKSB7DQogICAgICAgIC8vICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7DQogICAgICAgIC8vICAgfQ0KICAgICAgfSwNCiAgICAgIC4uLm1hcE11dGF0aW9ucyh7DQogICAgICAgICAgY2hhbmdlUG93ZXJvZmZDb21maXJtZWQ6J1BPV0VSX09GRl9DT05GUklNRURfTVVUQVRJT04nLA0KICAgICAgICAgIHVwZGF0ZVBhZ2VTdGFjazogJ1VQREFURV9QQUdFU1RBQ0snDQogICAgICB9KQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgICAgLi4ubWFwR2V0dGVycyhbDQogICAgICAgICAgJ3BhZ2VTdGFjaycNCiAgICAgIF0pDQogIH0NCn0NCg=="},{"version":3,"sources":["PowerOffModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PowerOffModal.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"power-off-modal\">\r\n      <div class=\"power-off-slider\">\r\n          <div class=\"cover\" :style=\"`width:${coverWidth}px`\">\r\n              \r\n          </div>\r\n          <div class=\"power\"\r\n            @touchstart=\"handleTouchstart\"\r\n            @touchmove=\"handleTouchmove\"\r\n            @touchend=\"handleTouchend\"\r\n            @mousedown=\"handleMousedown\"\r\n            @mousemove=\"handleMousemove\"\r\n            @mouseup=\"handleMouseup\"\r\n            @mouseleave=\"handleMouseup\"\r\n            :style=\"`left:${offset}px`\"\r\n          >\r\n            <Button>\r\n                <Icon type=\"md-power\" color=\"red\" />\r\n            </Button>\r\n          </div>\r\n          <div class=\"toast\" v-if=\"isToastShown\">\r\n              滑动关机\r\n          </div>\r\n      </div>\r\n      <div class=\"power-off-cancel\">\r\n          <Button shape=\"circle\" @click=\"handleCancelPoweroff\">\r\n              <Icon type=\"ios-close-circle\"/>\r\n          </Button>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapMutations, mapGetters} from 'vuex'\r\n\r\nexport default {\r\n  name: 'powerOffModal',\r\n  props: {\r\n    msg: String\r\n  },\r\n  mounted() {\r\n      console.log(this.$route);\r\n  },\r\n  data() {\r\n      return {\r\n          //the width of div.cover\r\n          coverWidth:0,\r\n          //start x \r\n          startX: 0,\r\n          //true when mouse down started \r\n          isStarted: false,\r\n          //offset of power button\r\n          offset: 0,\r\n          //true: show toast\r\n          isToastShown: true\r\n      }\r\n  },\r\n  methods: {\r\n      //handle power off button touch move\r\n      handleTouchmove(event) {\r\n          let currentX = event.changedTouches[0].clientX;\r\n          this.coverWidth = currentX > this.startX ? currentX - this.startX : 0;\r\n          this.offset = this.coverWidth;\r\n          if (this.coverWidth > 86) {\r\n              //unshow toast\r\n              this.isToastShown = false;\r\n          }\r\n          else if (!this.isToastShown) {\r\n              this.isToastShown = true;\r\n          }\r\n          if (this.coverWidth >= 165) {\r\n              //power off confirmed\r\n              //this.$emit(\"poweroffConfirmed\");\r\n              this.poweroffConfirmed();\r\n\r\n              //reset data\r\n              this.handleTouchend();\r\n          }\r\n          //console.log(this.coverWidth);\r\n      },\r\n      //handle power off button touch start\r\n      handleTouchstart(event) {\r\n          //console.log(\"start\")\r\n          this.startX = event.changedTouches[0].clientX;\r\n      },\r\n      handleTouchend() {\r\n          this.isStarted = false;\r\n          this.coverWidth = 0;\r\n          this.offset = 0;\r\n          this.isToastShown = true;\r\n      },\r\n      //handle power off button touch move\r\n      handleMousemove(event) {\r\n          if (!this.isStarted) {\r\n              return;\r\n          }\r\n          //console.log(event);\r\n          let currentX = event.pageX;\r\n          this.coverWidth = currentX > this.startX ? currentX - this.startX : 0;\r\n          this.offset = this.coverWidth;\r\n          if (this.coverWidth > 86) {\r\n              //unshow toast\r\n              this.isToastShown = false;\r\n          }\r\n          else if (!this.isToastShown) {\r\n              this.isToastShown = true;\r\n          }\r\n          if (this.coverWidth >= 165) {\r\n              //power off confirmed\r\n              //this.$emit(\"poweroffConfirmed\");\r\n              this.poweroffConfirmed();\r\n              //reset data\r\n              this.handleMouseup();\r\n          }\r\n          //console.log(this.coverWidth);\r\n      },\r\n      //handle power off button touch start\r\n      handleMousedown(event) {\r\n          //console.log(event);\r\n          //console.log(\"start\")\r\n          this.isStarted = true;\r\n          this.startX = event.pageX;\r\n      },\r\n      //handle mouse up\r\n      handleMouseup() {\r\n          this.isStarted = false;\r\n          this.coverWidth = 0;\r\n          this.offset = 0;\r\n          this.isToastShown = true;\r\n      },\r\n      //handleCancelPoweroff\r\n      handleCancelPoweroff() {\r\n          //this.$emit(\"poweroffCanceled\");\r\n          if (window.history.length > 1) {\r\n              let pageStack = this.pageStack;\r\n              //pop当前页面\r\n              pageStack.pop();\r\n              //获取目标页面\r\n              let destination = pageStack.pop();\r\n              this.updatePageStack(pageStack);\r\n              this.$router.push(destination);   \r\n          }\r\n      },\r\n      //poweroffConfirmed\r\n      poweroffConfirmed() {\r\n          //这里会触发phone组件中的watch 导致那边的poweroff先执行\r\n          this.changePoweroffComfirmed(true);\r\n        //   if (window.history.length > 1) {\r\n        //       this.$router.go(-1);\r\n        //   }\r\n      },\r\n      ...mapMutations({\r\n          changePoweroffComfirmed:'POWER_OFF_CONFRIMED_MUTATION',\r\n          updatePageStack: 'UPDATE_PAGESTACK'\r\n      })\r\n  },\r\n  computed: {\r\n      ...mapGetters([\r\n          'pageStack'\r\n      ])\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style lang=\"scss\" scoped>\r\ndiv.power-off-modal {\r\n    $out-bg:rgb(150, 133, 133);\r\n    $out-opacity:0.5;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: $out-bg;\r\n    padding-top: 10%;\r\n    padding-bottom: 10%;\r\n\r\n    display: flex;\r\n    justify-content:space-between;\r\n    align-items: center;\r\n    flex-direction: column;\r\n  div.power-off-slider {\r\n      border-radius: 5%;\r\n      width: 210px;\r\n      height: 8%;\r\n      background-color: rgba(85, 85, 85, 0.479);\r\n      position: relative;\r\n      display: flex;\r\n      justify-content: flex-start;\r\n      align-items: center;\r\n      \r\n      .cover {\r\n          height: 100%;\r\n          width: 0%;\r\n          background-color: $out-bg;\r\n      }\r\n      .power {\r\n          position: absolute;\r\n          left: 0;\r\n          top: 0;\r\n      }  \r\n      .toast {\r\n          text-align: center;\r\n          padding-left: 30%;\r\n      } \r\n  }\r\n\r\n  div.power-off-cancel {\r\n      \r\n  }\r\n}\r\n</style>\r\n"]}]}