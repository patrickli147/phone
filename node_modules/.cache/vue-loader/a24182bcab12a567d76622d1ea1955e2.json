{"remainingRequest":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\src\\components\\Picture.vue?vue&type=style&index=0&id=33b13222&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\src\\components\\Picture.vue","mtime":1588930164525},{"path":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoucGljdHVyZS13cmFwIHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCiAgICBjb2xvcjogYmxhY2s7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGxlZnQ6IDA7DQogICAgdG9wOiAwOw0KfQ0KDQoucGljdHVyZSB7DQogICAgd2lkdGg6IDEwMCU7DQogICAgaGVpZ2h0OiA5NSU7DQoNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgZmxleC13cmFwOiB3cmFwOw0KDQogICAgLmluZm9iYXIgew0KICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgaGVpZ2h0OiAxMCU7DQogICAgICAgIGNvbG9yOiByZ2IoMTgsMTUwLDIxOSk7DQogICAgICAgIHBhZGRpbmc6IDIlOw0KICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzc3NzsNCg0KICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgLmJhY2tpY29uIHsNCiAgICAgICAgICAgIHdpZHRoOiAzMCU7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0KICAgICAgICAgICAgaW1nIHsNCiAgICAgICAgICAgICAgICB3aWR0aDogMjBweDsNCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDIwcHg7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAudGltZWluZm8gew0KICAgICAgICAgICAgd2lkdGg6IDQwJTsNCiAgICAgICAgICAgIGNvbG9yOiBibGFjazsNCiAgICAgICAgICAgIC5kYXRlIHsNCiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwOw0KICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTVweDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLnRpbWUgew0KICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC5lZGl0IHsNCiAgICAgICAgICAgIHdpZHRoOiAzMCU7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiByaWdodDsNCiAgICAgICAgfQ0KDQogICAgICAgIC50by1waG90b3Mgew0KICAgICAgICAgICAgd2lkdGg6IDMwJTsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgICAgICB9DQogICAgfQ0KDQogICAgLm1haW4taW1nIHsNCiAgICAgICAgaGVpZ2h0OiA3MCU7DQogICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgICAgIA0KICAgICAgICAuaW1nLXdyYXAgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICBpbWcgew0KICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIC5zY3JvbGwtYmFyIHsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgIGhlaWdodDogMTAlOw0KICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiYSgxMTksIDExOSwgMTE5LCAwLjE5OSk7DQogICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCg0KICAgICAgICAuc2Nyb2xsLXdyYXAgew0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICB0b3A6IDA7DQoNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgZmxleC13cmFwOiBub3dyYXA7DQogICAgICAgICAgICAvL292ZXJmbG93LXg6IHNjcm9sbDsNCiAgICAgICAgICAgIC5waWN0dXJlLWl0ZW0gew0KICAgICAgICAgICAgICAgIHdpZHRoOiA1JTsNCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaW1new0KICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC5waWN0dXJlLWl0ZW0tY3VycmVudCB7DQogICAgICAgICAgICAgICAgd2lkdGg6IDEwJTsNCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7DQogICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDIuNSU7DQogICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAyLjUlOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGltZ3sNCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KICAgIH0NCiAgICAuc2Nyb2xsLWJhcjo6LXdlYmtpdC1zY3JvbGxiYXIgew0KICAgICAgICBkaXNwbGF5Om5vbmU7DQogICAgfQ0KICAgIA0KICAgIC5ib3R0b21iYXIgew0KICAgICAgICBoZWlnaHQ6IDEwJTsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgIHBhZGRpbmc6IDIlOw0KDQogICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAuc2hhcmUgew0KICAgICAgICAgICAgd2lkdGg6MzAlOw0KICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAubGlrZSB7DQogICAgICAgICAgICB3aWR0aDo0MCU7DQogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLmRlbGV0ZSB7DQogICAgICAgICAgICB3aWR0aDozMCU7DQogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAvL+e7n+S4gOiuvue9rmltZw0KICAgICAgICBpbWcgew0KICAgICAgICAgICAgaGVpZ2h0OiAyMHB4Ow0KICAgICAgICAgICAgd2lkdGg6IDIwcHg7DQogICAgICAgIH0NCiAgICB9DQp9DQo="},{"version":3,"sources":["Picture.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAubA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Picture.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"picture-wrap\" :style=\"`opacity:${bgOpacity};`\" >\r\n        <topbar class=\"topbar\" :isBlack=\"(!!'')\"></topbar>\r\n        <div class=\"picture\" v-if=\"dataFromParent.urls\">\r\n            <div class=\"infobar\">\r\n                <div class=\"backicon\" @click=\"handleBackIconClicked\" @dragstart=\"cancelDrag\">\r\n                    <img src=\"../assets/left.png\" alt=\"<\">\r\n                </div>\r\n                <div class=\"timeinfo\">\r\n                    <div class=\"date\">{{currentDateObj.getMonth()}}月{{currentDateObj.getDate()}}日</div>\r\n                    <div class=\"time\">{{currentDateObj.getHours()}}:{{currentDateObj.getMinutes()}}</div>\r\n                </div>\r\n                <div class=\"edit\" v-if=\"currentPath === '/phone/albums'\">\r\n                    编辑\r\n                </div>\r\n                <div class=\"to-photos\" v-if=\"currentPath === '/phone/camera'\" @click=\"routeToPhotos\">所有照片</div>\r\n            </div>\r\n\r\n            <div class=\"main-img\"\r\n                @mousedown=\"handleMousedown\"\r\n                @mousemove=\"handleMousemove\"\r\n                @mouseup=\"handleMouseup\"\r\n                @mouseleave=\"handleMouseleave\"\r\n            >\r\n                <div \r\n                    class=\"img-wrap\" \r\n                    :style=\"`left:${left - 350}px;top:${top}px`\" \r\n                    v-if=\"isHorizontal && index > 0\"\r\n                >\r\n                    <img :src=\"index > 0 ? dataFromParent.urls[index - 1].csrc : ''\" alt=\"...\">\r\n                </div>\r\n\r\n                <div class=\"img-wrap\" :style=\"`left:${left}px;top:${top}px`\" v-if=\"dataFromParent.urls.length\">\r\n                    <img :src=\"csrc\" alt=\"加载失败\" @dragstart=\"cancelDrag($event)\" >\r\n                </div> \r\n\r\n                <div \r\n                    class=\"img-wrap\" \r\n                    :style=\"`left:${left + 350}px;top:${top}px`\" \r\n                    v-if=\"isHorizontal && index < (dataFromParent.urls.length - 1)\"\r\n                >\r\n                    <img :src=\"index < (dataFromParent.urls.length - 1) ? dataFromParent.urls[index + 1].csrc : ''\" alt=\"...\">\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"scroll-bar\"  id=\"scroll-bar\" @scroll=\"handleScroll\">\r\n                <div class=\"scroll-wrap\" :style=\"`left:${(9 - index) * 17}px;`\">\r\n                    <div\r\n                        v-for=\"(item, index1) in dataFromParent.urls\"\r\n                        :key=\"item.name\"\r\n                        :class=\"index1 === index ? 'picture-item-current' : 'picture-item'\"\r\n                        @click=\"handleChosen(index1)\"\r\n                    >\r\n                        <img :src=\"item.csrc\" alt=\"...\" @dragstart=\"cancelDrag($event)\" >\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n\r\n            <div class=\"bottombar\">\r\n                <div class=\"share\" @dragstart=\"cancelDrag\">\r\n                    <img src=\"../assets/share.png\" alt=\"...\">\r\n                </div>\r\n                <div class=\"like\" @click=\"handleLikeClicked\" @dragstart=\"cancelDrag\">\r\n                    <img v-if=\"isLiked\" src=\"../assets/heart-full.png\" alt=\"...\">\r\n                    <img v-else src=\"../assets/heart.png\" alt=\"...\">\r\n                </div>\r\n                <div class=\"delete\" @click=\"handleDeleteClicked\" @dragstart=\"cancelDrag\">\r\n                    <img src=\"../assets/delete.png\" alt=\"...\">\r\n                </div>\r\n                <Modal confirmMsg=\"删除照片\" cancelMsg=\"取消\" :isShown=\"isModalShown\" @modalEvent=\"handleModalEvent\"></Modal>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n</template>\r\n\r\n<script>\r\nimport {mapGetters, mapMutations} from 'vuex';\r\nimport Topbar from '@/components/Topbar';\r\nimport Modal from '@/components/Modal';\r\n\r\nexport default {\r\n    mounted() {\r\n        //console.log(this.givenData);\r\n    },\r\n    props: {\r\n        givenData: Object,\r\n        givenIndex: Number,\r\n    },\r\n    data() {\r\n        return {\r\n            //current index of the picture\r\n            index: this.givenIndex,\r\n            //left of picture wrap\r\n            left: 0,\r\n            //top of picture wrap\r\n            top: 0,\r\n            //is mouse event started\r\n            isStarted: false,\r\n            //start x of mousedown\r\n            startX: 0,\r\n            //start y of mousedown\r\n            startY: 0,\r\n            //direction of swipe\r\n            direction: 'nodirection',\r\n            //is horizontal\r\n            isHorizontal: true,\r\n            //is main img clicked\r\n            isMainImgClicked: false,\r\n            //isModalShown\r\n            isModalShown: false,\r\n            //opacity of the bg 背景虚化\r\n            bgOpacity: 1,\r\n            //data from parent\r\n            dataFromParent: this.givenData,\r\n        }\r\n    },\r\n    methods: {\r\n        //map mutations\r\n        ...mapMutations({\r\n            updatePictures: 'UPDATE_PICTURES'\r\n        }),\r\n        //cancel drag event\r\n        cancelDrag(e) {\r\n            e.preventDefault();\r\n        },\r\n        //change current index when clicked\r\n        handleChosen(index1) {\r\n            this.index = index1;\r\n        },\r\n        //handleBackIconClicked: 告诉父组件返回\r\n        handleBackIconClicked() {\r\n            //TODO\r\n            //set index\r\n\r\n            this.$emit(\"backIconClicked\");\r\n        },\r\n        //routeToPhotos\r\n        routeToPhotos() {\r\n            this.$router.push('/phone/albums');\r\n        },\r\n        //handle mousedown on main img\r\n        handleMousedown(e) {\r\n            //记录起始坐标\r\n            this.isStarted = true;\r\n            this.startX = e.pageX;\r\n            this.startY = e.pageY;\r\n        },\r\n        //handle mousemove on main img\r\n        handleMousemove(e) {\r\n            if (!this.isStarted) {\r\n                //当没有按下鼠标时，直接返回\r\n                return;\r\n            }\r\n            let currentX = e.pageX;\r\n            let currentY = e.pageY;\r\n            let offsetX = Math.abs(currentX - this.startX);\r\n            let offsetY = Math.abs(currentY - this.startY);\r\n\r\n            if (this.direction === 'nodirection' && (offsetX > 10 || offsetY > 10)) {\r\n                //任意一个方向的位移达到10px以上,判断是左右滑动还是上下滑动\r\n                if (offsetX > offsetY) {\r\n                    //判定为左右滑动\r\n                    if (this.left > 0) {\r\n                        this.direction = 'right';\r\n                    }\r\n                    else {\r\n                        this.direction = 'left';\r\n                    }\r\n                    this.isHorizontal = true;\r\n                }\r\n                else {\r\n                    //判定为上下滑动\r\n                    if (this.top > 0) {\r\n                        this.direction = 'down';\r\n                    }\r\n                    else {\r\n                        this.direction = 'up';\r\n                    }\r\n                    this.isHorizontal = false;\r\n                }\r\n            }\r\n            else {\r\n                //方向已经确定\r\n                if (this.direction === 'up' || this.direction === 'down') {\r\n                    //竖直滑动需要考虑y方向的位移\r\n                    this.top = currentY - this.startY;\r\n                    //同时需要背景虚化\r\n                    if (Math.abs(this.top) > 270) {\r\n                        //最小的opacity为0.1\r\n                        this.bgOpacity = 0.1;\r\n                    }\r\n                    else {\r\n                        this.bgOpacity = 1 - (Math.abs(this.top) / 300);\r\n                    }\r\n                }\r\n                //x方向的位移始终要考虑\r\n                this.left = currentX - this.startX;\r\n            }\r\n        },\r\n        //handle mouseup: end of swipe\r\n        async handleMouseup() {\r\n            //reset bgOpacity\r\n            this.bgOpacity = 1;\r\n\r\n            //没有发生移动，视为click\r\n            if (this.left === 0 && this.top === 0) {\r\n                this.handleMainImgClicked();\r\n            }\r\n            \r\n            //滑动结束\r\n            this.isStarted = false;\r\n            this.startX = 0;\r\n            this.startY = 0;\r\n\r\n            if (this.direction === 'left' || this.direction === 'right') {\r\n                //左右滑动\r\n                if (Math.abs(this.left) < 100) {\r\n                    //滑动距离不足100px，视为无效的滑动\r\n                    this.left = 0;\r\n                }\r\n                else {\r\n                    //滑动有效,给出最终滑动方向，并执行滑动响应\r\n                    if (this.left > 0) {\r\n                        await this.handleSwipe('right');\r\n                    }\r\n                    else {\r\n                        await this.handleSwipe('left');\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                //竖直方向滑动，相当于按下返回按钮\r\n                if (Math.abs(this.top) > 50) {\r\n                    //需要足够的移动距离\r\n                    this.handleBackIconClicked();\r\n                }\r\n            }\r\n\r\n            //重置\r\n            this.left = 0;\r\n            this.top = 0;\r\n            this.direction = 'nodirection';\r\n        },\r\n        //handle mouseleave main img\r\n        handleMouseleave() {\r\n            if (!this.isStarted) {\r\n                //滑动没有开始\r\n                return;\r\n            }\r\n            else {\r\n                //等同于mouseup\r\n                this.handleMouseup();\r\n            }\r\n        },\r\n        //handle swipe action\r\n        async handleSwipe(direction) {\r\n            //只需要处理左右滑动\r\n            if (direction === 'left') {\r\n                //处理左滑动\r\n\r\n                if (this.index < this.dataFromParent.urls.length - 1) {\r\n                    //剩余动画\r\n                    for (; this.left > -350;) {\r\n                        if (this.left - 10 < -350) {\r\n                            this.left = -350;\r\n                        }\r\n                        else {\r\n                            this.left -= 10;\r\n                        }\r\n                        //延时\r\n                        await new Promise((resolve) => {\r\n                            setTimeout(resolve, 1);\r\n                        });\r\n                    }\r\n\r\n                    //更新index\r\n                    this.index ++;\r\n                }\r\n                else {\r\n                    console.log(\"returned\")\r\n                    return;\r\n                }\r\n            }\r\n            else {\r\n                //处理右滑动\r\n\r\n                if (this.index > 0) {\r\n                    //剩余动画\r\n                    for (; this.left < 350;) {\r\n                        if (this.left + 10 > 350) {\r\n                            this.left = 350;\r\n                        }\r\n                        else {\r\n                            this.left += 10;\r\n                        }\r\n                        //延时\r\n                        await new Promise((resolve) => {\r\n                            setTimeout(resolve, 1);\r\n                        });\r\n                    }\r\n\r\n                    //更新index\r\n                    this.index --;\r\n                }\r\n                else {\r\n                    return;\r\n                }\r\n            }\r\n        },\r\n        //handleMainImgClicked\r\n        handleMainImgClicked() {\r\n            //console.log(this.index);\r\n            this.isMainImgClicked = !this.isMainImgClicked;\r\n        },\r\n        //handleLikeClicked: user like or unlike\r\n        handleLikeClicked() {\r\n            if (this.givenData.name === '相机胶卷') {\r\n                //处理pictures\r\n                let pictures1 = this.pictures;\r\n                pictures1[this.index].isLiked = !pictures1[this.index].isLiked;\r\n                this.updatePictures(pictures1);\r\n            }\r\n            \r\n            //处理data from parent\r\n            this.dataFromParent.urls[this.index].isLiked = !this.dataFromParent.urls[this.index].isLiked;\r\n        },\r\n        //handleDeleteClicked: delete current picture\r\n        handleDeleteClicked() {\r\n            //show modal\r\n            this.isModalShown = true;\r\n        },\r\n        //handleModalEvent: event from Modal.vue\r\n        handleModalEvent(e) {\r\n            //unshow modal\r\n            this.isModalShown = false;\r\n\r\n            if (e.eventMsg === 'confirmed') {\r\n                //删除确认\r\n                if (this.givenData.name === '相机胶卷') {\r\n                    //处理pictures\r\n                    let newPictures = this.pictures.filter((item, index)=> {\r\n                        return !(this.index === index);\r\n                    });\r\n                    \r\n                    this.updatePictures(newPictures);\r\n                }\r\n                \r\n                //处理data from parent\r\n                this.dataFromParent.urls = this.dataFromParent.urls.filter((item, index) => {\r\n                    return !(this.index === index);\r\n                });\r\n            }\r\n            else {\r\n                //删除取消\r\n                return;\r\n            }\r\n        },\r\n        //handleScroll\r\n        handleScroll(e) {\r\n            console.log(e);\r\n        }\r\n    },\r\n    computed: {\r\n        //current src of img\r\n        csrc() {\r\n            if (this.currentPictureObj) {\r\n                return this.currentPictureObj.csrc;\r\n            }\r\n            else {\r\n                return '';\r\n            }\r\n        },\r\n        //current picture obj \r\n        currentPictureObj() {\r\n            if (this.dataFromParent.urls) {\r\n                return this.dataFromParent.urls[this.index];\r\n            }\r\n            else {\r\n                return {};\r\n            }\r\n        },\r\n        //is current picture liked\r\n        isLiked() {\r\n            if (this.currentPictureObj) {\r\n                return this.currentPictureObj.isLiked;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        },\r\n        //current date obj\r\n        currentDateObj() {\r\n            if (this.currentPictureObj) {\r\n                let name = this.currentPictureObj.name;\r\n                let date = new Date(name);\r\n                return date;\r\n            }\r\n            else {\r\n                return new Date();\r\n            }\r\n        },\r\n        //current path \r\n        currentPath() {\r\n            return this.$route.path;\r\n        },\r\n        //map getters\r\n        ...mapGetters([\r\n            'pictures'\r\n        ])\r\n    },\r\n    watch: {\r\n        givenData() {\r\n            if (this.givenData.name === '相机胶卷') {\r\n                let tempObj = {\r\n                    name: '相机胶卷',\r\n                    urls: this.pictures\r\n                };\r\n                this.dataFromParent = Object.assign({}, tempObj);\r\n            }\r\n            //console.log(this.givenData);\r\n            else {\r\n                this.dataFromParent = Object.assign({}, this.givenData);\r\n            }\r\n            \r\n        },\r\n        givenIndex() {\r\n            this.index = this.givenIndex;\r\n        }\r\n    },\r\n    components: {\r\n        Topbar,\r\n        Modal\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.picture-wrap {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: #fff;\r\n    color: black;\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n}\r\n\r\n.picture {\r\n    width: 100%;\r\n    height: 95%;\r\n\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-wrap: wrap;\r\n\r\n    .infobar {\r\n        width: 100%;\r\n        height: 10%;\r\n        color: rgb(18,150,219);\r\n        padding: 2%;\r\n        border-bottom: 1px solid #777;\r\n\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        .backicon {\r\n            width: 30%;\r\n            text-align: left;\r\n            img {\r\n                width: 20px;\r\n                height: 20px;\r\n            }\r\n        }\r\n\r\n        .timeinfo {\r\n            width: 40%;\r\n            color: black;\r\n            .date {\r\n                font-weight: 500;\r\n                font-size: 15px;\r\n            }\r\n\r\n            .time {\r\n                font-size: 10px;\r\n            }\r\n        }\r\n\r\n        .edit {\r\n            width: 30%;\r\n            text-align: right;\r\n        }\r\n\r\n        .to-photos {\r\n            width: 30%;\r\n            text-align: right;\r\n        }\r\n    }\r\n\r\n    .main-img {\r\n        height: 70%;\r\n        width: 100%;\r\n        overflow: hidden;\r\n        position: relative;\r\n        \r\n        .img-wrap {\r\n            width: 100%;\r\n            height: 100%;\r\n            position: absolute;\r\n            img {\r\n                width: 100%;\r\n            }\r\n        }\r\n    }\r\n    \r\n    .scroll-bar {\r\n        width: 100%;\r\n        height: 10%;\r\n        border-top: 1px solid rgba(119, 119, 119, 0.199);\r\n        position: relative;\r\n\r\n        .scroll-wrap {\r\n            width: 100%;\r\n            height: 100%;\r\n            position: absolute;\r\n            top: 0;\r\n\r\n            display: flex;\r\n            justify-content: flex-start;\r\n            align-items: center;\r\n            flex-wrap: nowrap;\r\n            //overflow-x: scroll;\r\n            .picture-item {\r\n                width: 5%;\r\n                height: 100%;\r\n                flex-shrink: 0;\r\n                \r\n                img{\r\n                    width: 100%;\r\n                    height: 100%;\r\n                }\r\n            }\r\n            .picture-item-current {\r\n                width: 10%;\r\n                height: 100%;\r\n                flex-shrink: 0;\r\n                margin-left: 2.5%;\r\n                margin-right: 2.5%;\r\n                \r\n                img{\r\n                    width: 100%;\r\n                    height: 100%;\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n    .scroll-bar::-webkit-scrollbar {\r\n        display:none;\r\n    }\r\n    \r\n    .bottombar {\r\n        height: 10%;\r\n        width: 100%;\r\n        padding: 2%;\r\n\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        .share {\r\n            width:30%;\r\n            height: 100%;\r\n            display: flex;\r\n            justify-content: flex-start;\r\n            align-items: center;\r\n        }\r\n\r\n        .like {\r\n            width:40%;\r\n            height: 100%;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n        }\r\n\r\n        .delete {\r\n            width:30%;\r\n            height: 100%;\r\n            display: flex;\r\n            justify-content: flex-end;\r\n            align-items: center;\r\n        }\r\n\r\n        //统一设置img\r\n        img {\r\n            height: 20px;\r\n            width: 20px;\r\n        }\r\n    }\r\n}\r\n</style>"]}]}