{"remainingRequest":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\src\\components\\Photos.vue?vue&type=style&index=0&id=cb5de3d0&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\src\\components\\Photos.vue","mtime":1588915106945},{"path":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5waG90b3Mgew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGhlaWdodDogMTAwJTsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjExLCAxODksIDE4OSk7DQogICAgY29sb3I6IGJsYWNrOw0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICBsZWZ0OiAwOw0KICAgIHRvcDogMDsNCg0KICAgIC50b3AtaW5mbyB7DQogICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICBoZWlnaHQ6IDEwJTsNCiAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7DQoNCiAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgIGZsZXgtd3JhcDogd3JhcDsNCiAgICAgICAgLnRvcC1idG4gew0KICAgICAgICAgICAgd2lkdGg6IDI1JTsNCiAgICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7DQogICAgICAgICAgICBpbWcgew0KICAgICAgICAgICAgICAgIHdpZHRoOiAyMHB4Ow0KICAgICAgICAgICAgICAgIGhlaWdodDogMjBweDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC50aXRsZSB7DQogICAgICAgICAgICB3aWR0aDogNTAlOw0KICAgICAgICAgICAgZm9udC1zaXplOiAyMHB4Ow0KICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5lZGl0IHsNCiAgICAgICAgICAgIHdpZHRoOiAyNSU7DQogICAgICAgICAgICBmb250LXNpemU6IDE4cHg7DQogICAgICAgICAgICBjb2xvcjogcmdiKDE4LDE1MCwyMTkpOw0KICAgICAgICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAucGhvdG8tY29udGFpbmVyIHsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgIGhlaWdodDogODUlOw0KICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgICAgICBvdmVyZmxvdzogc2Nyb2xsOw0KICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQoNCiAgICAgICAgLnBob3RvLWl0ZW0td3JhcCB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgICAgICAgICAucGhvdG8taXRlbSB7DQogICAgICAgICAgICAgICAgd2lkdGg6IDI1JTsNCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDg1cHg7DQogICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgICAgICAgICAgIC5zZWxlY3RlZC1pY29uIHsNCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICAgICAgICAgICAgICByaWdodDogMDsNCiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAwOw0KICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjBweDsNCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyMHB4Ow0KICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigxOCwxNTAsMjE5KTsNCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7DQogICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7DQogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsNCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGltZyB7DQogICAgICAgICAgICAgICAgICAgIHdpZHRoOiA4NXB4Ow0KICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDg1cHg7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLnNlbGVjdGVkIHsNCiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgfQ0KICAgIC5waG90by1jb250YWluZXI6Oi13ZWJraXQtc2Nyb2xsYmFyIHsNCiAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICB9DQogICAgDQogICAgLmJvdHRvbWJhciB7DQogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgYm90dG9tOiAwOw0KICAgICAgICBsZWZ0OiAwOw0KICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgaGVpZ2h0OiA4JTsNCiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDIxMSwgMTg5LCAxODkpOw0KICAgICAgICBwYWRkaW5nOiAxMHB4Ow0KDQogICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAuZGVsZXRlLWJ0biB7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgICAgICAgICAgaW1nIHsNCiAgICAgICAgICAgICAgICB3aWR0aDogMjBweDsNCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDIwcHg7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLmRpc2FibGVkIHsNCiAgICAgICAgICAgIG9wYWNpdHk6IDAuMjsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["Photos.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Photos.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"photos\">\r\n        <Topbar :isBlack=\"(!!'')\"></Topbar>\r\n        \r\n        <!-- 顶部操作栏 开始 -->\r\n        <div class=\"top-info\">\r\n            <div class=\"top-btn\" :style=\"!isEdit ? `opacity:1;` : `opacity:0;`\" @click=\"emitBackEvent\">\r\n                <img src=\"../assets/left.png\" alt=\"...\">\r\n            </div>\r\n            <div class=\"title\">\r\n                <span v-if=\"!isEdit\">{{dataFromParent.name}}</span>\r\n                <span v-if=\"isEdit && (picturesSelected.length === 0)\">选择项目</span>\r\n                <span v-if=\"isEdit && (picturesSelected.length > 0)\">已选择{{picturesSelected.length}}张照片</span>\r\n            </div>\r\n            <div class=\"edit\" @click=\"handleEditClicked\">\r\n                <p v-if=\"isEdit\">取消</p>\r\n                <p v-else>选择</p>\r\n            </div>\r\n        </div>\r\n        <!-- 顶部操作栏 结束 -->\r\n\r\n        <!-- photo-container 开始 -->\r\n        <div class=\"photo-container\">\r\n            <div class=\"photo-item-wrap\">\r\n                <div \r\n                    v-for=\"(item, index) in dataFromParent.urls\"\r\n                    :key=\"index\"\r\n                    @click=\"handlePictureClicked(index)\"\r\n                    @dragstart=\"cancelDrag\"\r\n                    :class=\"(picturesSelected.indexOf(index) >= 0) ? 'photo-item selected' : 'photo-item'\"\r\n                >\r\n                    <div class=\"selected-icon\" v-if=\"picturesSelected.indexOf(index) >= 0\">\r\n                        <span>√</span>\r\n                    </div>\r\n                    <img :src=\"item.csrc\" alt=\"加载失败\" >\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- photo-container 结束 -->  \r\n\r\n        <!-- bottombar start -->\r\n        <div class=\"bottombar\" v-if=\"isEdit\">\r\n            <div :class=\"picturesSelected.length ? 'delete-btn' : 'delete-btn disabled'\">\r\n                <img src=\"../assets/delete.png\" alt=\"...\" @click=\"handleDeleteSelected\">\r\n            </div>\r\n        </div>\r\n        <!-- bottombar end -->\r\n\r\n        <!-- picture component 开始 -->\r\n        <Picture :givenData=\"dataFromParent\" :givenIndex=\"indexToGive\" v-show=\"isPreviewed\" @backIconClicked=\"handleBackIconClicked\"></Picture>\r\n        <!-- picture component 结束 -->\r\n\r\n        <!-- 删除选中modal 开始 -->\r\n        <Modal confirmMsg=\"删除选中照片\" cancelMsg=\"取消\" :isShown=\"isDeleteModalShown\" @modalEvent=\"handleDeleteModalEvent\"></Modal>\r\n        <!-- 删除选中modal 结束 -->\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapGetters, mapMutations} from 'vuex';\r\nimport Topbar from '@/components/Topbar';\r\nimport Picture from '@/components/Picture';\r\nimport Mock from 'mockjs';\r\nimport Modal from '@/components/Modal';\r\n\r\nexport default {\r\n    props: {\r\n        givenData: Object\r\n    },\r\n    mounted() {\r\n        //mock data\r\n        //this.getRandomUrls();\r\n    },\r\n    data() {\r\n        return {\r\n            //is picture previewed\r\n            isPreviewed: false,\r\n            //indexToGive\r\n            indexToGive: 0,\r\n            //mocked img urls\r\n            mockUrls: [],\r\n            //title of album\r\n            dataFromParent: this.givenData,\r\n            //is edit mode\r\n            isEdit: false,\r\n            //pictures selected: save the indexes\r\n            picturesSelected: [],\r\n            //isDeleteModalShown\r\n            isDeleteModalShown: false,\r\n\r\n        }\r\n    },\r\n    methods: {\r\n        //map mutations\r\n        ...mapMutations({\r\n            updatePictures: 'UPDATE_PICTURES'\r\n        }),\r\n        //handleBackIconClicked: set isPreviewed to false\r\n        handleBackIconClicked() {\r\n            this.isPreviewed = false;\r\n        },\r\n        //open Photos\r\n        handlePictureClicked(index) {\r\n            if (this.isEdit) {\r\n                //处于编辑模式\r\n                if (this.picturesSelected.indexOf(index) >= 0) {\r\n                    //已选中\r\n                    return;\r\n                }\r\n                else {\r\n                    this.picturesSelected.push(index);\r\n                }\r\n            }\r\n            else {\r\n                //打开图片\r\n                this.indexToGive = index;\r\n                this.isPreviewed = true;\r\n            }\r\n        },\r\n        //cancel drag event\r\n        cancelDrag(e) {\r\n            e.preventDefault();\r\n        },\r\n        //get random img url with Mock\r\n        getRandomUrls() {\r\n            for (let i = 0; i < 100; i ++) {\r\n                this.mockUrls.push(Mock.Random.dataImage('85x85',Mock.Random.ctitle(4)))\r\n            }\r\n        },\r\n        //handleEditClicked\r\n        handleEditClicked() {\r\n            if (this.isEdit) {\r\n                //处于编辑模式,清空已选中\r\n                this.picturesSelected = [];\r\n            }\r\n            this.isEdit = !this.isEdit;\r\n        },\r\n        //emitBackEvent\r\n        emitBackEvent() {\r\n            //向父组件发出返回事件\r\n            this.$emit(\"backEventFromPhotos\");\r\n        },\r\n        //处理删除选中\r\n        handleDeleteSelected() {\r\n            this.isDeleteModalShown = true;\r\n        },\r\n        //处理子组件事件\r\n        handleDeleteModalEvent(e) {\r\n            this.isDeleteModalShown = false;\r\n\r\n            if (e.eventMsg === 'confirmed') {\r\n                //确认删除\r\n                this.dataFromParent.urls = this.dataFromParent.urls.filter((value, index) => {\r\n                    //删除对应的相册\r\n                    return !(this.picturesSelected.indexOf(index) >= 0);\r\n                });\r\n\r\n                //清空选中\r\n                this.picturesSelected = [];\r\n            }\r\n            else {\r\n                //取消删除相册\r\n                return;\r\n            }\r\n        }\r\n    },  \r\n    computed: {\r\n        //map getters\r\n        ...mapGetters([\r\n            'pictures'\r\n        ])\r\n    },\r\n    components: {\r\n        Topbar,\r\n        Picture,\r\n        Modal\r\n    },\r\n    watch: {\r\n        givenData() {\r\n            this.dataFromParent = this.givenData;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.photos {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgb(211, 189, 189);\r\n    color: black;\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n\r\n    .top-info {\r\n        width: 100%;\r\n        height: 10%;\r\n        padding: 10px;\r\n        border-bottom: 1px solid #eee;\r\n\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        flex-wrap: wrap;\r\n        .top-btn {\r\n            width: 25%;\r\n            height: 100%;\r\n            text-align: left;\r\n            img {\r\n                width: 20px;\r\n                height: 20px;\r\n            }\r\n        }\r\n\r\n        .title {\r\n            width: 50%;\r\n            font-size: 20px;\r\n            font-weight: 600;\r\n            text-align: center;\r\n        }\r\n\r\n        .edit {\r\n            width: 25%;\r\n            font-size: 18px;\r\n            color: rgb(18,150,219);\r\n            text-align: right;\r\n        }\r\n    }\r\n\r\n    .photo-container {\r\n        width: 100%;\r\n        height: 85%;\r\n        background-color: #fff;\r\n        overflow: scroll;\r\n        position: relative;\r\n\r\n        .photo-item-wrap {\r\n            display: flex;\r\n            justify-content: flex-start;\r\n            align-items: flex-start;\r\n            flex-wrap: wrap;\r\n            .photo-item {\r\n                width: 25%;\r\n                height: 85px;\r\n                position: relative;\r\n                .selected-icon {\r\n                    position: absolute;\r\n                    right: 0;\r\n                    bottom: 0;\r\n                    width: 20px;\r\n                    height: 20px;\r\n                    border-radius: 50%;\r\n                    background-color: rgb(18,150,219);\r\n                    color: #fff;\r\n                    font-weight: 600;\r\n                    font-size: 10px;\r\n                    display: flex;\r\n                    justify-content: center;\r\n                    align-items: center;\r\n                }\r\n                img {\r\n                    width: 85px;\r\n                    height: 85px;\r\n                }\r\n            }\r\n            .selected {\r\n                opacity: 0.2;\r\n            }\r\n        }\r\n        \r\n    }\r\n    .photo-container::-webkit-scrollbar {\r\n        display: none;\r\n    }\r\n    \r\n    .bottombar {\r\n        position: absolute;\r\n        bottom: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 8%;\r\n        background-color: rgb(211, 189, 189);\r\n        padding: 10px;\r\n\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        .delete-btn {\r\n            width: 100%;\r\n            text-align: right;\r\n            img {\r\n                width: 20px;\r\n                height: 20px;\r\n            }\r\n        }\r\n        .disabled {\r\n            opacity: 0.2;\r\n        }\r\n    }\r\n}\r\n</style>"]}]}