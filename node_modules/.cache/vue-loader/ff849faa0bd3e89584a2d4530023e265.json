{"remainingRequest":"C:\\Users\\Lenovo\\Desktop\\demos\\iphone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lenovo\\Desktop\\demos\\iphone\\src\\components\\PowerOffModal.vue?vue&type=style&index=0&id=5ca505ba&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\Lenovo\\Desktop\\demos\\iphone\\src\\components\\PowerOffModal.vue","mtime":1588495969785},{"path":"C:\\Users\\Lenovo\\Desktop\\demos\\iphone\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\demos\\iphone\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\demos\\iphone\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\demos\\iphone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\demos\\iphone\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQpkaXYucG93ZXItb2ZmLW1vZGFsIHsNCiAgICAkb3V0LWJnOnJnYigxNTAsIDEzMywgMTMzKTsNCiAgICAkb3V0LW9wYWNpdHk6MC41Ow0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGhlaWdodDogMTAwJTsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkb3V0LWJnOw0KICAgIHBhZGRpbmctdG9wOiAxMCU7DQogICAgcGFkZGluZy1ib3R0b206IDEwJTsNCg0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICBkaXYucG93ZXItb2ZmLXNsaWRlciB7DQogICAgICBib3JkZXItcmFkaXVzOiA1JTsNCiAgICAgIHdpZHRoOiAyMTBweDsNCiAgICAgIGhlaWdodDogOCU7DQogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDg1LCA4NSwgODUsIDAuNDc5KTsNCiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7DQogICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgDQogICAgICAuY292ZXIgew0KICAgICAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgICAgICB3aWR0aDogMCU7DQogICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJG91dC1iZzsNCiAgICAgIH0NCiAgICAgIC5wb3dlciB7DQogICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICAgIGxlZnQ6IDA7DQogICAgICAgICAgdG9wOiAwOw0KICAgICAgfSAgDQogICAgICAudG9hc3Qgew0KICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDMwJTsNCiAgICAgIH0gDQogIH0NCg0KICBkaXYucG93ZXItb2ZmLWNhbmNlbCB7DQogICAgICANCiAgfQ0KfQ0K"},{"version":3,"sources":["PowerOffModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA","file":"PowerOffModal.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"power-off-modal\">\r\n      <div class=\"power-off-slider\">\r\n          <div class=\"cover\" :style=\"`width:${coverWidth}px`\">\r\n              \r\n          </div>\r\n          <div class=\"power\"\r\n            @touchstart=\"handleTouchstart\"\r\n            @touchmove=\"handleTouchmove\"\r\n            @touchend=\"handleTouchend\"\r\n            @mousedown=\"handleMousedown\"\r\n            @mousemove=\"handleMousemove\"\r\n            @mouseup=\"handleMouseup\"\r\n            @mouseleave=\"handleMouseup\"\r\n            :style=\"`left:${offset}px`\"\r\n          >\r\n            <Button>\r\n                <Icon type=\"md-power\" color=\"red\" />\r\n            </Button>\r\n          </div>\r\n          <div class=\"toast\" v-if=\"isToastShown\">\r\n              滑动关机\r\n          </div>\r\n      </div>\r\n      <div class=\"power-off-cancel\">\r\n          <Button shape=\"circle\" @click=\"handleCancelPoweroff\">\r\n              <Icon type=\"ios-close-circle\"/>\r\n          </Button>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapMutations, mapGetters} from 'vuex'\r\n\r\nexport default {\r\n  name: 'powerOffModal',\r\n  props: {\r\n    msg: String\r\n  },\r\n  mounted() {\r\n      console.log(this.$route);\r\n  },\r\n  data() {\r\n      return {\r\n          //the width of div.cover\r\n          coverWidth:0,\r\n          //start x \r\n          startX: 0,\r\n          //true when mouse down started \r\n          isStarted: false,\r\n          //offset of power button\r\n          offset: 0,\r\n          //true: show toast\r\n          isToastShown: true\r\n      }\r\n  },\r\n  methods: {\r\n      //handle power off button touch move\r\n      handleTouchmove(event) {\r\n          let currentX = event.changedTouches[0].clientX;\r\n          this.coverWidth = currentX > this.startX ? currentX - this.startX : 0;\r\n          this.offset = this.coverWidth;\r\n          if (this.coverWidth > 86) {\r\n              //unshow toast\r\n              this.isToastShown = false;\r\n          }\r\n          else if (!this.isToastShown) {\r\n              this.isToastShown = true;\r\n          }\r\n          if (this.coverWidth >= 165) {\r\n              //power off confirmed\r\n              //this.$emit(\"poweroffConfirmed\");\r\n              this.poweroffConfirmed();\r\n\r\n              //reset data\r\n              this.handleTouchend();\r\n          }\r\n          //console.log(this.coverWidth);\r\n      },\r\n      //handle power off button touch start\r\n      handleTouchstart(event) {\r\n          //console.log(\"start\")\r\n          this.startX = event.changedTouches[0].clientX;\r\n      },\r\n      handleTouchend() {\r\n          this.isStarted = false;\r\n          this.coverWidth = 0;\r\n          this.offset = 0;\r\n          this.isToastShown = true;\r\n      },\r\n      //handle power off button touch move\r\n      handleMousemove(event) {\r\n          if (!this.isStarted) {\r\n              return;\r\n          }\r\n          //console.log(event);\r\n          let currentX = event.pageX;\r\n          this.coverWidth = currentX > this.startX ? currentX - this.startX : 0;\r\n          this.offset = this.coverWidth;\r\n          if (this.coverWidth > 86) {\r\n              //unshow toast\r\n              this.isToastShown = false;\r\n          }\r\n          else if (!this.isToastShown) {\r\n              this.isToastShown = true;\r\n          }\r\n          if (this.coverWidth >= 165) {\r\n              //power off confirmed\r\n              //this.$emit(\"poweroffConfirmed\");\r\n              this.poweroffConfirmed();\r\n              //reset data\r\n              this.handleMouseup();\r\n          }\r\n          //console.log(this.coverWidth);\r\n      },\r\n      //handle power off button touch start\r\n      handleMousedown(event) {\r\n          //console.log(event);\r\n          //console.log(\"start\")\r\n          this.isStarted = true;\r\n          this.startX = event.pageX;\r\n      },\r\n      //handle mouse up\r\n      handleMouseup() {\r\n          this.isStarted = false;\r\n          this.coverWidth = 0;\r\n          this.offset = 0;\r\n          this.isToastShown = true;\r\n      },\r\n      //handleCancelPoweroff\r\n      handleCancelPoweroff() {\r\n          //this.$emit(\"poweroffCanceled\");\r\n          if (window.history.length > 1) {\r\n              let pageStack = this.pageStack;\r\n              //pop当前页面\r\n              pageStack.pop();\r\n              //获取目标页面\r\n              let destination = pageStack.pop();\r\n              this.updatePageStack(pageStack);\r\n              this.$router.push(destination);   \r\n          }\r\n      },\r\n      //poweroffConfirmed\r\n      poweroffConfirmed() {\r\n          //这里会触发phone组件中的watch 导致那边的poweroff先执行\r\n          this.changePoweroffComfirmed(true);\r\n        //   if (window.history.length > 1) {\r\n        //       this.$router.go(-1);\r\n        //   }\r\n      },\r\n      ...mapMutations({\r\n          changePoweroffComfirmed:'POWER_OFF_CONFRIMED_MUTATION',\r\n          updatePageStack: 'UPDATE_PAGESTACK'\r\n      })\r\n  },\r\n  computed: {\r\n      ...mapGetters([\r\n          'pageStack'\r\n      ])\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style lang=\"scss\" scoped>\r\ndiv.power-off-modal {\r\n    $out-bg:rgb(150, 133, 133);\r\n    $out-opacity:0.5;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: $out-bg;\r\n    padding-top: 10%;\r\n    padding-bottom: 10%;\r\n\r\n    display: flex;\r\n    justify-content:space-between;\r\n    align-items: center;\r\n    flex-direction: column;\r\n  div.power-off-slider {\r\n      border-radius: 5%;\r\n      width: 210px;\r\n      height: 8%;\r\n      background-color: rgba(85, 85, 85, 0.479);\r\n      position: relative;\r\n      display: flex;\r\n      justify-content: flex-start;\r\n      align-items: center;\r\n      \r\n      .cover {\r\n          height: 100%;\r\n          width: 0%;\r\n          background-color: $out-bg;\r\n      }\r\n      .power {\r\n          position: absolute;\r\n          left: 0;\r\n          top: 0;\r\n      }  \r\n      .toast {\r\n          text-align: center;\r\n          padding-left: 30%;\r\n      } \r\n  }\r\n\r\n  div.power-off-cancel {\r\n      \r\n  }\r\n}\r\n</style>\r\n"]}]}