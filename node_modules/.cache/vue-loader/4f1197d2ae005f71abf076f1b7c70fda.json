{"remainingRequest":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\src\\components\\Photos.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\src\\components\\Photos.vue","mtime":1588915106945},{"path":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\新建文件夹\\phone\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge21hcEdldHRlcnMsIG1hcE11dGF0aW9uc30gZnJvbSAndnVleCc7DQppbXBvcnQgVG9wYmFyIGZyb20gJ0AvY29tcG9uZW50cy9Ub3BiYXInOw0KaW1wb3J0IFBpY3R1cmUgZnJvbSAnQC9jb21wb25lbnRzL1BpY3R1cmUnOw0KaW1wb3J0IE1vY2sgZnJvbSAnbW9ja2pzJzsNCmltcG9ydCBNb2RhbCBmcm9tICdAL2NvbXBvbmVudHMvTW9kYWwnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgcHJvcHM6IHsNCiAgICAgICAgZ2l2ZW5EYXRhOiBPYmplY3QNCiAgICB9LA0KICAgIG1vdW50ZWQoKSB7DQogICAgICAgIC8vbW9jayBkYXRhDQogICAgICAgIC8vdGhpcy5nZXRSYW5kb21VcmxzKCk7DQogICAgfSwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgLy9pcyBwaWN0dXJlIHByZXZpZXdlZA0KICAgICAgICAgICAgaXNQcmV2aWV3ZWQ6IGZhbHNlLA0KICAgICAgICAgICAgLy9pbmRleFRvR2l2ZQ0KICAgICAgICAgICAgaW5kZXhUb0dpdmU6IDAsDQogICAgICAgICAgICAvL21vY2tlZCBpbWcgdXJscw0KICAgICAgICAgICAgbW9ja1VybHM6IFtdLA0KICAgICAgICAgICAgLy90aXRsZSBvZiBhbGJ1bQ0KICAgICAgICAgICAgZGF0YUZyb21QYXJlbnQ6IHRoaXMuZ2l2ZW5EYXRhLA0KICAgICAgICAgICAgLy9pcyBlZGl0IG1vZGUNCiAgICAgICAgICAgIGlzRWRpdDogZmFsc2UsDQogICAgICAgICAgICAvL3BpY3R1cmVzIHNlbGVjdGVkOiBzYXZlIHRoZSBpbmRleGVzDQogICAgICAgICAgICBwaWN0dXJlc1NlbGVjdGVkOiBbXSwNCiAgICAgICAgICAgIC8vaXNEZWxldGVNb2RhbFNob3duDQogICAgICAgICAgICBpc0RlbGV0ZU1vZGFsU2hvd246IGZhbHNlLA0KDQogICAgICAgIH0NCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgLy9tYXAgbXV0YXRpb25zDQogICAgICAgIC4uLm1hcE11dGF0aW9ucyh7DQogICAgICAgICAgICB1cGRhdGVQaWN0dXJlczogJ1VQREFURV9QSUNUVVJFUycNCiAgICAgICAgfSksDQogICAgICAgIC8vaGFuZGxlQmFja0ljb25DbGlja2VkOiBzZXQgaXNQcmV2aWV3ZWQgdG8gZmFsc2UNCiAgICAgICAgaGFuZGxlQmFja0ljb25DbGlja2VkKCkgew0KICAgICAgICAgICAgdGhpcy5pc1ByZXZpZXdlZCA9IGZhbHNlOw0KICAgICAgICB9LA0KICAgICAgICAvL29wZW4gUGhvdG9zDQogICAgICAgIGhhbmRsZVBpY3R1cmVDbGlja2VkKGluZGV4KSB7DQogICAgICAgICAgICBpZiAodGhpcy5pc0VkaXQpIHsNCiAgICAgICAgICAgICAgICAvL+WkhOS6jue8lui+keaooeW8jw0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnBpY3R1cmVzU2VsZWN0ZWQuaW5kZXhPZihpbmRleCkgPj0gMCkgew0KICAgICAgICAgICAgICAgICAgICAvL+W3sumAieS4rQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnBpY3R1cmVzU2VsZWN0ZWQucHVzaChpbmRleCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgLy/miZPlvIDlm77niYcNCiAgICAgICAgICAgICAgICB0aGlzLmluZGV4VG9HaXZlID0gaW5kZXg7DQogICAgICAgICAgICAgICAgdGhpcy5pc1ByZXZpZXdlZCA9IHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIC8vY2FuY2VsIGRyYWcgZXZlbnQNCiAgICAgICAgY2FuY2VsRHJhZyhlKSB7DQogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgIH0sDQogICAgICAgIC8vZ2V0IHJhbmRvbSBpbWcgdXJsIHdpdGggTW9jaw0KICAgICAgICBnZXRSYW5kb21VcmxzKCkgew0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkgKyspIHsNCiAgICAgICAgICAgICAgICB0aGlzLm1vY2tVcmxzLnB1c2goTW9jay5SYW5kb20uZGF0YUltYWdlKCc4NXg4NScsTW9jay5SYW5kb20uY3RpdGxlKDQpKSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgLy9oYW5kbGVFZGl0Q2xpY2tlZA0KICAgICAgICBoYW5kbGVFZGl0Q2xpY2tlZCgpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzRWRpdCkgew0KICAgICAgICAgICAgICAgIC8v5aSE5LqO57yW6L6R5qih5byPLOa4heepuuW3sumAieS4rQ0KICAgICAgICAgICAgICAgIHRoaXMucGljdHVyZXNTZWxlY3RlZCA9IFtdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5pc0VkaXQgPSAhdGhpcy5pc0VkaXQ7DQogICAgICAgIH0sDQogICAgICAgIC8vZW1pdEJhY2tFdmVudA0KICAgICAgICBlbWl0QmFja0V2ZW50KCkgew0KICAgICAgICAgICAgLy/lkJHniLbnu4Tku7blj5Hlh7rov5Tlm57kuovku7YNCiAgICAgICAgICAgIHRoaXMuJGVtaXQoImJhY2tFdmVudEZyb21QaG90b3MiKTsNCiAgICAgICAgfSwNCiAgICAgICAgLy/lpITnkIbliKDpmaTpgInkuK0NCiAgICAgICAgaGFuZGxlRGVsZXRlU2VsZWN0ZWQoKSB7DQogICAgICAgICAgICB0aGlzLmlzRGVsZXRlTW9kYWxTaG93biA9IHRydWU7DQogICAgICAgIH0sDQogICAgICAgIC8v5aSE55CG5a2Q57uE5Lu25LqL5Lu2DQogICAgICAgIGhhbmRsZURlbGV0ZU1vZGFsRXZlbnQoZSkgew0KICAgICAgICAgICAgdGhpcy5pc0RlbGV0ZU1vZGFsU2hvd24gPSBmYWxzZTsNCg0KICAgICAgICAgICAgaWYgKGUuZXZlbnRNc2cgPT09ICdjb25maXJtZWQnKSB7DQogICAgICAgICAgICAgICAgLy/noa7orqTliKDpmaQNCiAgICAgICAgICAgICAgICB0aGlzLmRhdGFGcm9tUGFyZW50LnVybHMgPSB0aGlzLmRhdGFGcm9tUGFyZW50LnVybHMuZmlsdGVyKCh2YWx1ZSwgaW5kZXgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgLy/liKDpmaTlr7nlupTnmoTnm7jlhowNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEodGhpcy5waWN0dXJlc1NlbGVjdGVkLmluZGV4T2YoaW5kZXgpID49IDApOw0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgLy/muIXnqbrpgInkuK0NCiAgICAgICAgICAgICAgICB0aGlzLnBpY3R1cmVzU2VsZWN0ZWQgPSBbXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIC8v5Y+W5raI5Yig6Zmk55u45YaMDQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwgIA0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIC8vbWFwIGdldHRlcnMNCiAgICAgICAgLi4ubWFwR2V0dGVycyhbDQogICAgICAgICAgICAncGljdHVyZXMnDQogICAgICAgIF0pDQogICAgfSwNCiAgICBjb21wb25lbnRzOiB7DQogICAgICAgIFRvcGJhciwNCiAgICAgICAgUGljdHVyZSwNCiAgICAgICAgTW9kYWwNCiAgICB9LA0KICAgIHdhdGNoOiB7DQogICAgICAgIGdpdmVuRGF0YSgpIHsNCiAgICAgICAgICAgIHRoaXMuZGF0YUZyb21QYXJlbnQgPSB0aGlzLmdpdmVuRGF0YTsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["Photos.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Photos.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"photos\">\r\n        <Topbar :isBlack=\"(!!'')\"></Topbar>\r\n        \r\n        <!-- 顶部操作栏 开始 -->\r\n        <div class=\"top-info\">\r\n            <div class=\"top-btn\" :style=\"!isEdit ? `opacity:1;` : `opacity:0;`\" @click=\"emitBackEvent\">\r\n                <img src=\"../assets/left.png\" alt=\"...\">\r\n            </div>\r\n            <div class=\"title\">\r\n                <span v-if=\"!isEdit\">{{dataFromParent.name}}</span>\r\n                <span v-if=\"isEdit && (picturesSelected.length === 0)\">选择项目</span>\r\n                <span v-if=\"isEdit && (picturesSelected.length > 0)\">已选择{{picturesSelected.length}}张照片</span>\r\n            </div>\r\n            <div class=\"edit\" @click=\"handleEditClicked\">\r\n                <p v-if=\"isEdit\">取消</p>\r\n                <p v-else>选择</p>\r\n            </div>\r\n        </div>\r\n        <!-- 顶部操作栏 结束 -->\r\n\r\n        <!-- photo-container 开始 -->\r\n        <div class=\"photo-container\">\r\n            <div class=\"photo-item-wrap\">\r\n                <div \r\n                    v-for=\"(item, index) in dataFromParent.urls\"\r\n                    :key=\"index\"\r\n                    @click=\"handlePictureClicked(index)\"\r\n                    @dragstart=\"cancelDrag\"\r\n                    :class=\"(picturesSelected.indexOf(index) >= 0) ? 'photo-item selected' : 'photo-item'\"\r\n                >\r\n                    <div class=\"selected-icon\" v-if=\"picturesSelected.indexOf(index) >= 0\">\r\n                        <span>√</span>\r\n                    </div>\r\n                    <img :src=\"item.csrc\" alt=\"加载失败\" >\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- photo-container 结束 -->  \r\n\r\n        <!-- bottombar start -->\r\n        <div class=\"bottombar\" v-if=\"isEdit\">\r\n            <div :class=\"picturesSelected.length ? 'delete-btn' : 'delete-btn disabled'\">\r\n                <img src=\"../assets/delete.png\" alt=\"...\" @click=\"handleDeleteSelected\">\r\n            </div>\r\n        </div>\r\n        <!-- bottombar end -->\r\n\r\n        <!-- picture component 开始 -->\r\n        <Picture :givenData=\"dataFromParent\" :givenIndex=\"indexToGive\" v-show=\"isPreviewed\" @backIconClicked=\"handleBackIconClicked\"></Picture>\r\n        <!-- picture component 结束 -->\r\n\r\n        <!-- 删除选中modal 开始 -->\r\n        <Modal confirmMsg=\"删除选中照片\" cancelMsg=\"取消\" :isShown=\"isDeleteModalShown\" @modalEvent=\"handleDeleteModalEvent\"></Modal>\r\n        <!-- 删除选中modal 结束 -->\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapGetters, mapMutations} from 'vuex';\r\nimport Topbar from '@/components/Topbar';\r\nimport Picture from '@/components/Picture';\r\nimport Mock from 'mockjs';\r\nimport Modal from '@/components/Modal';\r\n\r\nexport default {\r\n    props: {\r\n        givenData: Object\r\n    },\r\n    mounted() {\r\n        //mock data\r\n        //this.getRandomUrls();\r\n    },\r\n    data() {\r\n        return {\r\n            //is picture previewed\r\n            isPreviewed: false,\r\n            //indexToGive\r\n            indexToGive: 0,\r\n            //mocked img urls\r\n            mockUrls: [],\r\n            //title of album\r\n            dataFromParent: this.givenData,\r\n            //is edit mode\r\n            isEdit: false,\r\n            //pictures selected: save the indexes\r\n            picturesSelected: [],\r\n            //isDeleteModalShown\r\n            isDeleteModalShown: false,\r\n\r\n        }\r\n    },\r\n    methods: {\r\n        //map mutations\r\n        ...mapMutations({\r\n            updatePictures: 'UPDATE_PICTURES'\r\n        }),\r\n        //handleBackIconClicked: set isPreviewed to false\r\n        handleBackIconClicked() {\r\n            this.isPreviewed = false;\r\n        },\r\n        //open Photos\r\n        handlePictureClicked(index) {\r\n            if (this.isEdit) {\r\n                //处于编辑模式\r\n                if (this.picturesSelected.indexOf(index) >= 0) {\r\n                    //已选中\r\n                    return;\r\n                }\r\n                else {\r\n                    this.picturesSelected.push(index);\r\n                }\r\n            }\r\n            else {\r\n                //打开图片\r\n                this.indexToGive = index;\r\n                this.isPreviewed = true;\r\n            }\r\n        },\r\n        //cancel drag event\r\n        cancelDrag(e) {\r\n            e.preventDefault();\r\n        },\r\n        //get random img url with Mock\r\n        getRandomUrls() {\r\n            for (let i = 0; i < 100; i ++) {\r\n                this.mockUrls.push(Mock.Random.dataImage('85x85',Mock.Random.ctitle(4)))\r\n            }\r\n        },\r\n        //handleEditClicked\r\n        handleEditClicked() {\r\n            if (this.isEdit) {\r\n                //处于编辑模式,清空已选中\r\n                this.picturesSelected = [];\r\n            }\r\n            this.isEdit = !this.isEdit;\r\n        },\r\n        //emitBackEvent\r\n        emitBackEvent() {\r\n            //向父组件发出返回事件\r\n            this.$emit(\"backEventFromPhotos\");\r\n        },\r\n        //处理删除选中\r\n        handleDeleteSelected() {\r\n            this.isDeleteModalShown = true;\r\n        },\r\n        //处理子组件事件\r\n        handleDeleteModalEvent(e) {\r\n            this.isDeleteModalShown = false;\r\n\r\n            if (e.eventMsg === 'confirmed') {\r\n                //确认删除\r\n                this.dataFromParent.urls = this.dataFromParent.urls.filter((value, index) => {\r\n                    //删除对应的相册\r\n                    return !(this.picturesSelected.indexOf(index) >= 0);\r\n                });\r\n\r\n                //清空选中\r\n                this.picturesSelected = [];\r\n            }\r\n            else {\r\n                //取消删除相册\r\n                return;\r\n            }\r\n        }\r\n    },  \r\n    computed: {\r\n        //map getters\r\n        ...mapGetters([\r\n            'pictures'\r\n        ])\r\n    },\r\n    components: {\r\n        Topbar,\r\n        Picture,\r\n        Modal\r\n    },\r\n    watch: {\r\n        givenData() {\r\n            this.dataFromParent = this.givenData;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.photos {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgb(211, 189, 189);\r\n    color: black;\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n\r\n    .top-info {\r\n        width: 100%;\r\n        height: 10%;\r\n        padding: 10px;\r\n        border-bottom: 1px solid #eee;\r\n\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        flex-wrap: wrap;\r\n        .top-btn {\r\n            width: 25%;\r\n            height: 100%;\r\n            text-align: left;\r\n            img {\r\n                width: 20px;\r\n                height: 20px;\r\n            }\r\n        }\r\n\r\n        .title {\r\n            width: 50%;\r\n            font-size: 20px;\r\n            font-weight: 600;\r\n            text-align: center;\r\n        }\r\n\r\n        .edit {\r\n            width: 25%;\r\n            font-size: 18px;\r\n            color: rgb(18,150,219);\r\n            text-align: right;\r\n        }\r\n    }\r\n\r\n    .photo-container {\r\n        width: 100%;\r\n        height: 85%;\r\n        background-color: #fff;\r\n        overflow: scroll;\r\n        position: relative;\r\n\r\n        .photo-item-wrap {\r\n            display: flex;\r\n            justify-content: flex-start;\r\n            align-items: flex-start;\r\n            flex-wrap: wrap;\r\n            .photo-item {\r\n                width: 25%;\r\n                height: 85px;\r\n                position: relative;\r\n                .selected-icon {\r\n                    position: absolute;\r\n                    right: 0;\r\n                    bottom: 0;\r\n                    width: 20px;\r\n                    height: 20px;\r\n                    border-radius: 50%;\r\n                    background-color: rgb(18,150,219);\r\n                    color: #fff;\r\n                    font-weight: 600;\r\n                    font-size: 10px;\r\n                    display: flex;\r\n                    justify-content: center;\r\n                    align-items: center;\r\n                }\r\n                img {\r\n                    width: 85px;\r\n                    height: 85px;\r\n                }\r\n            }\r\n            .selected {\r\n                opacity: 0.2;\r\n            }\r\n        }\r\n        \r\n    }\r\n    .photo-container::-webkit-scrollbar {\r\n        display: none;\r\n    }\r\n    \r\n    .bottombar {\r\n        position: absolute;\r\n        bottom: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 8%;\r\n        background-color: rgb(211, 189, 189);\r\n        padding: 10px;\r\n\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        .delete-btn {\r\n            width: 100%;\r\n            text-align: right;\r\n            img {\r\n                width: 20px;\r\n                height: 20px;\r\n            }\r\n        }\r\n        .disabled {\r\n            opacity: 0.2;\r\n        }\r\n    }\r\n}\r\n</style>"]}]}